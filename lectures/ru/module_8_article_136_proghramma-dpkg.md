Программа dpkg используется для установки, удаления и управления пакетами Debian/Ubuntu и вызывается из командной строки. Формат ее вызова следующий:  
`dpkg [ключи] действие`  
Для запуска dpkg нужно обладать полномочиями root, получить которые можно с помощью команды sudo. Рассмотрим, как правильно работать с программой dpkg. Предположим, у нас есть пакет package.deb. Для его установки откройте Терминал и введите команду:  
`sudo dpkg -i /<путь>/package.deb`  
Как видите, в установке пакета нет ничего сложного. Процесс установки состоит из следующих шагов:


1. Из пакета извлекаются управляющие файлы.
2. Если уже была установлена старая версия этого пакета, тогда из старого пакета запускается сценарий prerm — он подготавливает систему к удалению старой версии пакета. Другими словами, если требуется, то обновление пакета выполняется автоматически.
3. Выполняется сценарий preinst, если он есть в этом пакете.
4. Из пакета распаковываются остальные файлы. Если был установлен старый пакет, то его файлы не удаляются, а сохраняются в другом месте, чтобы их можно было восстановить, если что-то пойдет не так.
5. Если была установлена старая версия пакета, то из него выполняется сценарий postrm (действия после удаления). Сценарий запускается сразу после выполнения сценария preinst нового пакета, поскольку старые файлы удаляются во время записи новых файлов.
6. Выполняется настройка пакета:
	* распаковываются новые конфигурационные файлы, а старые сохраняются, если нужно будет их восстановить в случае ошибки во время установки нового пакета;
	* запускается сценарий postinst, если он есть в этом пакете


Удалить пакет тоже просто:  
`sudo dpkg -r <package>`  
При удалении пакета не требуется указывать путь к пакету и «расширение» пакета, т.е. символы .deb в конце имени файла.  
Однако установка и удаление пакетов — это далеко не все, что можно выполнить с помощью программы dpkg. 




|  |  |
| --- | --- |
| Параметр | Описание |
| -l [образец] | Выводит все установленные пакеты, имена которых соответствуют образцу. Образец задается с помощью масок \* и ? — например, образец а\* соответствует любому имени пакета, начинающемуся на букву «а». Если образец не задан, выводятся все пакеты |
| -L <имя пакета> | Выводит имена файлов из указанного пакета (пакет должен быть установлен) |
| -р <имя пакета> | Выводит информацию об установленном пакете |
| —s <имя пакета> | Выводит информацию о статусе пакета |
| --unpack <имя пакета.deb> | Распаковывает, но не устанавливает пакет (полезно, если устанавливать пакет не требуется, а нужно лишь достать из него один или несколько файлов) |


Для того чтобы узнать какому пакету принадлежит файл dpkg имеет опцию -S, правда, выведено будет только имя пакета и адрес файла, например:  
`dpkg -S /usr/bin/cloud`

