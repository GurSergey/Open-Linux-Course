Для создания ссылок служит команда **ln**:


`ln file.txt link1`  
`ln -s file.txt link2`


Первая команда создает жесткую ссылку link1, ссылающуюся на текстовый файл file.txt. Вторая команда создает символическую ссылку link2, которая ссылается на этот же текстовый файл file.txt.  
Модифицируя ссылку (все равно какую: link1 или link2), вы автоматически модифицируете исходный файл file.txt.  
Мы только что научились создавать ссылки. Теперь давайте посмотрим, как различить — где файл, а где ссылка. Представим, что мы создали файл и две ссылки на него:


`touch file`  
`ln -s file symlink`  
`ln file hardlink`


Если ввести команду **ls -l**, то символическая ссылка будет выделена цветом. Каким именно — зависит от вашего дистрибутива. Так, в Ubuntu символические ссылки выделяются цветом ближе к бирюзовому. Помимо этого с помощью стрелки (->) сразу показывается, на какой файл указывает ссылка. Если в вашем дистрибутиве символические ссылки не выделяются, попробуйте указать опцию --color=auto:


`ls -l --color=auto`


Также найти все символические ссылки можно с помощью команды find: `find . -type l`


А вот жесткие ссылки никак не выделяются, и визуально нельзя понять: перед нами файл или ссылка— по крайней мере, в Ubuntu. Однако есть дистрибутивы, где жесткие ссылки выделяются каким-либо цветом, — например, темно-синим. 


Рассмотрим подробнее вывод команды **ls -l**. Первая колонка вывода команды **ls -l** — это права доступа. Вторая колонка — счетчик жестких ссылок.


-rw-r--r-- 2 serge serge 0 авг 15 19:14 file   
-rw-r--r-- 2 serge serge 0 авг 15 19:14 hardlink   
lrwxrwxrwx 1 serge serge 4 авг 15 19:14 symlink -> file  
Посмотрим на вывод команды **ls -i**, которая показывает индексные дескрипторы  
файлов:  
`ls -i`  
2130783 file  
2130783 hardlink  
2130784 symlink  
Как можно видеть, здесь есть два одинаковых дескриптора (2130783) и два имени для этого дескриптора.


Как уже отмечалось, файл не будет удален, пока на него указывает хоть одна жесткая ссылка. Ранее приводился вывод команды ls с опцией -i. Также посмотрите на вывод команды ls -l — вторая колонка показывает количество жестких ссылок на inode.  
По сути, в данном контексте нет особой разницы между ссылкой и файлом. Вы можете удалить файл file:  
`rm file`  
`ls -l`  
-rw-r--r-- 1 serge serge 0 авг 15 19:14 hardlink   
lrwxrwxrwx 1 serge serge 4 авг 15 19:14 symlink -> file


И вы увидите, что счетчик ссылок оказался уменьшен на единицу. Но ваши данные останутся в файле hardlink, и вы сможете их прочитать. Почему же файл file был удален, если на него указывала жесткая ссылка hardlink? Да потому, что жесткая ссылка указывает не на имя файла, а на inode. А ведь индексный дескриптор 2130783 остался, и он не будет удален, пока счетчик жестких ссылок больше 0!  
Кстати, после удаления файла file, на который указывала символическая ссылка symlink, последняя превращается в «битую» ссылку— в выводе команды is она отмечается красным цветом на черном фоне. Таким образом, символическая ссылка превращается в «битую» по следующим причинам:  
1) удаление целевого файла;  
2) переименование целевого файла;  
3) переименование элементов пути к целевому файлу. Например, ссылка указывала  
на файл /home/serge/links/file, а потом каталог links был переименован в test.  
Возвращаемся к жестким ссылкам — найти все жесткие ссылки на файл можно командой **find** С опцией -samefile:  
`find . -samefile file`  
Учитывая, что жесткая ссылка— это практически то же самое, что и файл, возникает вопрос: когда лучше копировать файл, а когда создавать ссылки?  
Все зависит от поставленных задач. Ведь жесткая ссылка ссылается на тот же inode, что и файл, следовательно, при изменении файла (или жесткой ссылки) изменяется и содержимое файла. Если же вы создаете копию файла, то ей будет присвоен другой inode, и, следовательно, изменение копии никак не отразится на оригинале и наоборот.

