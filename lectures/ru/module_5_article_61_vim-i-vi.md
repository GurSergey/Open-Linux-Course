Итак, приступим к базовому рассмотрению редактора vi. Он может работать в трех режимах:


* основной (визуальный) режим— в нем и осуществляется редактирование текста;
* командный режим — в нем осуществляется ввод специальных команд для работы с текстом (если сравнивать vi с нормальным редактором, то этот режим ассоциируется с меню редактора, где есть команды типа Сохранить, Выйти и т.д.);
* режим просмотра — используется только для просмотра файла (если надумаете использовать этот режим, вспомните про команду less).


После запуска редактора вы можете переключать режимы, но выбрать режим можно и при запуске редактора:  
`vi файл`  
`vi -е файл`  
`vi -R файл`  
Первая команда запускает vi и загружает файл. Вторая — запускает vi в командном режиме и загружает файл. Третья — запускает режим просмотра файла. Если указанный файл не существует, то он будет создан. По умолчанию активируется именно командный режим, поэтому в ключе -е смысла нет.  
**После запуска vi главное — знать, как из него выйти**. Ведь в нем не будет привычной строки меню, редактор также не реагирует на привычные комбинации клавиш вроде <Alt>+<X>. Комбинация <Ctrl>+<C> тоже не поможет.  
основные команды редактора vi:  
Команда - Описание  
**:q!** - Выход без сохранения  
**:w** - Сохранить изменения  
**:w** <файл> - Сохранить изменения под именем <файл>  
**:wq** - Сохранить и выйти  
**:q** - Выйти, если нет изменений  
**i** - Перейти в режим вставки символов в позицию курсора  
**а** - Перейти в режим вставки символов в позицию после курсора  
**о** - Вставить строку после текущей  
**O** - Вставить строку над текущей  
**X** - Удалить символ в позицию курсора  
**dd** - Удалить текущую строку  
**u** - Отменить последнее действие


![image.png](./images/vim-i-vi_1.png)


Команды, которые начинаются с двоеточия, будут отображены в нижней строке, остальные просто выполняются, но не отображаются. Как уже было отмечено, у редактора vi есть два основных режима (режим просмотра мы не учитываем): режим команд и режим редактирования (визуальный). Переключение в режим команд  
осуществляется нажатием клавиши <Esc>. Нажатие клавиш <i>, <а> и других переключает редактор в режим вставки, когда набираемые символы трактуются именно как символы, а не как команды. Для переключения обратно в командный режим надо снова воспользоваться клавишей <Esc>. В некоторых случаях (например, когда вы пытаетесь передвинуть курсор левее первого символа в строке) переход в командный режим осуществляется автоматически.  
Теперь немного практики. Введите команду:  
`$ vi file.txt`  
Нажмите клавишу <i>, чтобы переключиться в режим вставки. Наберите любой текст, но постарайтесь не ошибаться, поскольку исправление ошибок в vi — дело, требующее отдельного разговора. Затем нажмите клавишу <Esc> и введите команду **:wq**. После выхода из редактора введите команду:  
`cat file.txt`  
Так вы убедитесь, что файл создан, и в нем сохранен введенный вами текст. Теперь приступим к дальнейшему рассмотрению редактора. Если ввести не команду i, а команду а, то вы тоже перейдете в режим вставки, но с одним отличием — вводимый текст будет вставляться не перед символом, в котором находится курсор, а после него. Также в режим вставки можно перейти командами о и O. В первом случае добавится пустая строка после текущей строки, а во втором — перед текущей строкой, и весь дальнейший ввод будет восприниматься именно как ввод текста, а не команд.  
Чтобы удалить символ, нужно перейти в режим команд и над удаляемым символом нажать клавишу <х>. Да, клавиши <Backspace> и <Delete> тут не работают. Точнее, <Backspace> работает, но для удаления последней непрерывно введенной последовательности символов.   
Чтобы удалить строку, в которой находится курсор, нужно использовать команду dd. Помните, что vi считает строкой не то, что вы видите на экране, а последовательность символов до первого символа новой строки (\n). Если строка длиннее 80 символов, то она переносится на две экранные строки и визуально выглядит как две строки, а не как одна.  
Чтобы перейти в конец строки (клавиши <Ноmе> и <End> тоже не работают, как вы успели заметить, если уже запускали vi), нужно ввести команду $. При навигации курсор перемещается не по экранным линиям, а как раз по строкам текста.  
Для отмены последней операции служит команда u. Вот только истории изменений нет, да и по команде и отменяется вся предыдущая команда целиком. Например, вы создали файл, перешли в режим вставки (командой i) и ввели весь текст Большой медицинской энциклопедии. Если вы введете команду u, то она отменит всю предыдущую команду, т.е. удалит весь введенный вами текст. Так что, будьте осторожны.  
Если есть желание продолжить знакомство, введите команду:  
`man vi`

