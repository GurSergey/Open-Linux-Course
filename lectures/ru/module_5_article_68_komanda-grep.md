Выбор той или иной формы регулярных выражений (обычной или расширен­ной) зависит от того, какую из них поддерживает нужная вам программа. В таких программах, как grep , можно использовать любую форму — это уже зависит от ваших личных предпочтений. Стоит отметить, что интерпретация символов из расширенных регулярных выражений может отличаться в зависимости от выбран­ной вами формы. Поэтому важно понимать, какая из них поддерживается в вашей программе или как выбрать одну из них, если поддерживаются обе.  
Правила регулярных выражений могут показаться запутанными, особенно если вы впервые с ними сталкиваетесь. Здесь помогут примеры их использования с привязкой к конкретным программам. Далее рассматриваем регулярные выражения на примере программы grep.


Команда grep ищет файлы, содержащие заданную стро­ку, и возвращает их имена и (если файл текстовый) найденный фрагмент. С ее помощью также можно вы­полнять поиск по определенному файлу. Для использо­вания этой утилиты нужно ввести ее имя, набор необя­зательных параметров, регулярное выражение и при необходимости определение имени файла. Команда grep поддерживает большое количество параметров.


**Часто используемые параметры**




|  |  |
| --- | --- |
| --count или -с | Вместо самих строк, содержащих совпаде­ние с регулярным выражением, выводит их номера |
| -file <файл> | Этот параметр позволяет использовать ша­блон, находящийся в заданном файле, вместо того чтобы вводить его в командной строке. Сокращенным вариантом данного параметра является команда fgrep |
| --ignore-case или -і  | По умолчанию поиск осуществляется с учетом регистра. Чтобы изменить это поведение, используйте параметр -і или —ignore-case  |
| -recursive или -R или -r | Этот параметр позволяет искать не только в самой папке, но и во всех ее подпапках. Чтобы не указывать данный параметр, можно воспользоваться командой rgrep |
| -extended-regexp -F | Команда grep по умолчанию использует обыч­ные регулярные выражения. Укажите этот пара­метр, чтобы включить поддержку расширенной формы. Как вариант, можете ввести команду egrep вместо grep, в которой расширенные регу­лярные выражения используются по умолчанию |


Ниже показан пример использования grep в сочетании с обычным регулярным выражением:  
`$ grep -r eth0 /etc/\*`  
Эта команда находит все файлы в папке /etc , содер­жащие строку eth0 (в большинстве дистрибутивов это  
идентификатор первого сетевого устройства). Посколь­ку в примере указан параметр -r, поиск выполняется  
рекурсивно как по самой папке /etc , так и по всем ее подпапкам. Для каждого совпавшего файла выводится  
строка, содержащая искомый текст.  
Представьте, что вам нужно найти все файлы в пап­ке /etc , содержащие строки ethe или ethi. Для того чтобы указать оба варианта устройств, можно ввести следующую команду, в кото­рой используется регулярное выражение с диапазоном:  
`$ grep eth[01] /etc/\*`


В качестве более сложного примера попробуем найти строки со словами games или mail и последующим nologin  
в одном-единственном файле /etc/passwd. Эта задача требует применения расширенной формы регулярных  
выражений; соответствующая команда выглядит так:  
`$ grep -Е "(games | mail).\*nologin" /etc/passwd`  
Команда, представленная выше, иллюстрирует еще одну особенность регуляр­ных выражений, с которой вам, возможно, придется сталкиваться: кавычки команд­ной строки. Поскольку определенные символы в командной оболочке, такие как вертикальная черта (|) или звездочка (\*), имеют особое назначение, некоторые регулярные выражения следует заключать в кавычки. В противном случае они будут интерпретированы как команды самой оболочки.  
Утилиту grep можно использовать в сочетании с другими командами, просеивая их вывод в поисках важной информации (в этой книге приводится несколько таких примеров). Для этого необходимо выполнять перенаправление ввода и вывода.  
Данная тема будет рассматриваться нами в дальнейших разделах.

